<!doctype html>

<html lang="en">

	<head>

		<meta charset="utf-8">
		<title>杞成舟·木已成舟</title>
		<meta name="description" content="THOMSOON - Single page with minimalist two column description and one photo. Download free now with file Photoshop! ">
		<meta name="keywords" content="thomsoon, simplicity, theme, html5, single page, boxed portfolio">
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="author" content="thomsoon.com">
		<link rel="icon" type="image/png" href="img/icon.png" />

		<!--Style-->

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="css/style-responsive.css">

		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
		<link rel="stylesheet" type="text/css" href="css/normalize.css" />
		<link rel="stylesheet" href="css/jClocksGMT.css">
		<style>
			.htmleaf-container {
				margin: auto;
			}
		</style>
		<!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

	</head>

	<body>

		<!--Preloader-->

		<div class="preloader" id="preloader">
			<div class="item">
				<div class="spinner">
				</div>
			</div>
		</div>

		<div class="opacity-nav">

			<div class="menu-index" id="buttons" style="z-index:999999">
				<i class="fa  fa-close"></i>
			</div>

			<ul class="menu-fullscreen">
				<li><a class="ajax-link" href="index.html">Home</a></li>
				<li><a class="ajax-link" href="projects.html">Projects</a></li>
				<li><a class="ajax-link" href="conclusion.html">Paper</a></li>
				<li><a class="ajax-link" href="about-me.html">About me</a></li>
			</ul>

		</div>
		<!--Header-->
		<header id="fullscreen">
			<div class="htmleaf-container" style="float: left;">
				<div class="htmleaf-content">
					<div id="clock_korea"></div>
				</div>
			</div>
			<div class="logo" id="full"><a class="ajax-link" href="index.html">willsms</a></div>

			<div class="menu-index" id="button">
				<i class="fa fa-bars"></i>
			</div>

		</header>

		<div class="clear"></div>

		<!--Content-->

		<div class="content" id="ajax-content">

			<div class="text-intro">

				<h1>Log4j</h1>

				<div class="one-column">
					<p>Log4j是Apache的一个开源项目，它允许开发者以任意间隔输出日志信息。</p>

				</div>

				<div class="clear"></div>

				<br/><br/><br/>

				<div class="two-column">
					<p>1.Log4j主要由三大类组件构成：</p>
					<p>1）Logger-负责输出日志信息，并能够对日志信息进行分类筛选，即决定哪些日志信息应该被输出，哪些该被忽略。Loggers组件输出日志信息时分为5个级别：DEBUG、INFO、WARN、ERROR、FATAL。这五个级别的顺序是：DEBUG &lt;INFO&lt;WARN&lt;ERROR&lt;FATAL。如果设置某个Logger组件的级别是P，则只有级别比P高的日志信息才能输出。Logger是有继承关系的，最上层是rootLogger，定义的其他Logger都会继承rootLogger。
						<br> 2）Appender-定义了日志输出目的地，指定日志信息应该被输出到什么地方。输出的目的地可以是控制台、文件或网络设备。
						<br> 3）Layout-通过在Appender的后面附加Layout来实现格式化输出。一个Logger可以有多个Appender，每个Appender对应一个Layout。
					</p>
					<p>2.Loggers</p>
					<p>Logger的定义格式：log4j.[loggername]=[level],appenderName,appenderName,…<br /> 这里level是指Logger的优先级，appenderName是日志信息的输出地，可以同时定义多个输出地。
					</p>
					<p>3.Appenders</p>
					<p>Appender的定义格式：<br /> log4j.appender.appenderName = fully.qualified.name.of.appender.class <br /> // "fully.qualified.name.of.appender.class" 可以指定下面五个目的地中的一个：<br /> Appender类及其作用列表
						<br /> Appender类名
						<br /> 作 用<br /> org.apache.log4j.ConsoleAppender
						<br /> 将日志输出到控制台
						<br /> org.apache.log4j.FileAppender
						<br /> 将日志输出到文件
						<br /> org.apache.log4j.DailyRollingFileAppender
						<br /> 每天产生一个日志文件
						<br /> org.apache.log4j.RollingFileAppender
						<br /> 文件大小到达指定尺寸时产生一个新的文件
						<br /> org.apache.log4j. WriterAppender<br /> 将日志信息以流格式发送到任意指定的地方
					</p>
					<p>1）ConsoleAppender选项<br /> -Threshold=WARN:指定日志消息的输出最低层次。
						<br /> -ImmediateFlush=true:默认值是true,意谓着所有的消息都会被立即输出。
						<br /> -Target=System.err：默认情况下是：System.out,指定输出控制台。
						<br /> 2）FileAppender 选项<br /> -Threshold=WARN:指定日志消息的输出最低层次。
						<br /> -ImmediateFlush=true:默认值是true,意谓着所有的消息都会被立即输出。
						<br /> -File=mylog.txt:指定消息输出到mylog.txt文件。
						<br /> - Append=false:默认值是true,即将消息增加到指定文件中，false指将消息覆盖指定的文件内容。<br /> 3）DailyRollingFileAppender 选项<br /> -Threshold=WARN:指定日志消息的输出最低层次。
						<br /> -ImmediateFlush=true:默认值是true,意谓着所有的消息都会被立即输出。
						<br /> -File=mylog.txt:指定消息输出到mylog.txt文件。
						<br /> -Append=false:默认值是true,即将消息增加到指定文件中，false指将消息覆盖指定的文件内容。
						<br /> -DatePattern='.'yyyy-ww:每周滚动一次文件，即每周产生一个新的文件。当然也可以指定按月、周、天、时和分。即对应的格式如下：
						<br /> '.'yyyy-MM: 每月<br /> '.'yyyy-ww: 每周 <br /> '.'yyyy-MM-dd: 每天<br /> '.'yyyy-MM-dd-a: 每天两次<br /> '.'yyyy-MM-dd-HH: 每小时<br /> '.'yyyy-MM-dd-HH-mm: 每分钟<br /> 4）RollingFileAppender 选项<br /> -Threshold=WARN:指定日志消息的输出最低层次。
						<br /> -ImmediateFlush=true:默认值是true,意谓着所有的消息都会被立即输出。
						<br /> -File=mylog.txt:指定消息输出到mylog.txt文件。
						<br /> - Append=false:默认值是true,即将消息增加到指定文件中，false指将消息覆盖指定的文件内容。<br /> -MaxFileSize=100KB: 后缀可以是KB, MB 或者是 GB. 在日志文件到达该大小时，将会自动滚动，即将原来的内容移到mylog.log.1文件。<br /> -MaxBackupIndex=2:指定可以产生的滚动文件的最大数。
					</p>
					<p>4.Layouts</p>
					<p>Layout的定义格式：<br /> 部分一log4j.appender.appenderName.layout = fully.qualified.name.of.layout.class<br /> //"fully.qualified.name.of.layout.class" 可以指定下面4个格式中的一个：<br /> Layout类及其作用列表
						<br /> Layout类名
						<br /> 作 用<br /> org.apache.log4j.HTMLLayout
						<br /> 以HTML表格形式布局
						<br /> org.apache.log4j.PatternLayout
						<br /> 可以灵活地指定布局模式
						<br /> org.apache.log4j.SimpleLayout
						<br /> 包含日志信息的级别和信息字符串
						<br /> org.apache.log4j.TTCCLayout
						<br /> 包含日志产生的时间、线程、类别等等信息
						<br /> 1）HTMLLayout 选项<br /> -LocationInfo=true:默认值是false,输出java文件名称和行号。
						<br /> -Title=my app file: 默认值是 Log4J Log Messages。<br /> 2）PatternLayout 选项<br /> - ConversionPattern=%m%n :指定怎样格式化指定的消息。<br /> 3）XMLLayout 选项<br /> -LocationInfo=true:默认值是false,输出java文件和行号。
					</p>
					<p>部分二 log4j.appender.A1.layout.ConversionPattern=%-4r %-5p %d{yyyy-MM-dd HH:mm:ssS} %c %m%n<br /> 这里需要说明的就是日志信息格式中几个符号所代表的含义：
						<br /> 1）－X号: X信息输出时左对齐。<br /> 2）%p: 输出日志信息优先级，即DEBUG，INFO，WARN，ERROR，FATAL。<br /> 3）%d: 输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，比如：%d{yyy MMM dd HH:mm:ss,SSS}，输出类似：2002年10月18日 22：10：28，921。<br /> 4）%r: 输出自应用启动到输出该log信息耗费的毫秒数。<br /> 5）%c: 输出日志信息所属的类目，通常就是所在类的全名。<br
						/> 6）%t: 输出产生该日志事件的线程名。<br /> 7）%l: 输出日志事件的发生位置，相当于%C.%M(%F:%L)的组合,包括类目名、发生的线程，以及在代码中的行数。举例：Testlog4.main(TestLog4.java:10)。<br /> 8）%x: 输出和当前线程相关联的NDC(嵌套诊断环境),尤其用到像java servlets这样的多客户多线程的应用中。<br /> 9）%%: 输出一个"%"字符。<br /> 10）%F: 输出日志消息产生时所在的文件名称。<br
						/> 11） %L: 输出代码中的行号。<br /> 12）%m: 输出代码中指定的消息,产生的日志具体信息。<br /> 13）%n: 输出一个回车换行符，Windows平台为"\r\n"，Unix平台为"\n"输出日志信息换行。<br /> 可以在%与模式字符之间加上修饰符来控制其最小宽度、最大宽度、和文本的对齐方式。如：
						<br /> 1)%20c：指定输出category的名称，最小的宽度是20，如果category的名称小于20的话，默认的情况下右对齐。
						<br /> 2)%-20c:指定输出category的名称，最小的宽度是20，如果category的名称小于20的话，"-"号指定左对齐。
						<br /> 3)%.30c:指定输出category的名称，最大的宽度是30，如果category的名称大于30的话，就会将左边多出的字符截掉，但小于30的话也不会有空格。
						<br /> 4)%20.30c:如果category的名称小于20就补空格，并且右对齐，如果其名称长于30字符，就从左边交远销出的字符截掉。
					</p>
					<p>在web.xml中添加配置</p>
					<p>&lt;!-- 配置log4j配置文件的路径，可以是xml或 properties（此参数必须配）--&gt; <br /> 下面使用了classpath 参数指定log4j.properties文件的位置，这样log4j的配置文件就不用非要放到src的下面<br /> &lt;context-param&gt;
						<br /> &lt;param-name&gt;log4jConfigLocation&lt;/param-name&gt;
						<br /> &lt;param-value&gt;classpath:config/log4j/log4j.properties&lt;/param-value&gt;
						<br /> &lt;/context-param&gt; <br /> 使用spring的监听器,当应用启动时来读取log4j的配置文件
						<br /> &lt;listener&gt;
						<br /> &lt;listener-class&gt;org.springframework.web.util.Log4jConfigListener&lt;/listener-class&gt;
						<br /> &lt;/listener&gt;
					</p>
					<p>
						#输出到控制台 <br /> log4j.appender.systemOut = org.apache.log4j.ConsoleAppender<br /> log4j.appender.systemOut.layout = org.apache.log4j.PatternLayout <br /> log4j.appender.systemOut.layout.ConversionPattern = [%-5p][%-22d{yyyy/MM/dd HH:mm:ssS}][%l]%n%m%n
						<br /> log4j.appender.systemOut.Threshold = DEBUG <br /> log4j.appender.systemOut.ImmediateFlush = TRUE <br /> log4j.appender.systemOut.Target = System.out </p>
					<p>#输出到文件 <br /> log4j.appender.logFile = org.apache.log4j.FileAppender <br /> log4j.appender.logFile.layout = org.apache.log4j.PatternLayout <br /> log4j.appender.logFile.layout.ConversionPattern = [%-5p][%-22d{yyyy/MM/dd HH:mm:ssS}][%l]%n%m%n <br
						/> log4j.appender.logFile.Threshold = DEBUG <br /> log4j.appender.logFile.ImmediateFlush = TRUE <br /> log4j.appender.logFile.Append = TRUE <br /> log4j.appender.logFile.File = ../Struts2/WebRoot/log/File/log4j_Struts.log <br /> log4j.appender.logFile.Encoding
						= UTF-8 </p>
					<p>
						#按DatePattern输出到文件 <br /> log4j.appender.logDailyFile = org.apache.log4j.DailyRollingFileAppender <br /> log4j.appender.logDailyFile.layout = org.apache.log4j.PatternLayout <br /> log4j.appender.logDailyFile.layout.ConversionPattern = [%-5p][%-22d{yyyy/MM/dd
						HH:mm:ssS}][%l]%n%m%n <br /> log4j.appender.logDailyFile.Threshold = DEBUG <br /> log4j.appender.logDailyFile.ImmediateFlush = TRUE <br /> log4j.appender.logDailyFile.Append = TRUE <br /> log4j.appender.logDailyFile.File = ../Struts2/WebRoot/log/DailyFile/log4j_Struts
						<br /> log4j.appender.logDailyFile.DatePattern = '.'yyyy-MM-dd-HH-mm'.log' <br /> log4j.appender.logDailyFile.Encoding = UTF-8 </p>
					<p>#设定文件大小输出到文件 <br /> log4j.appender.logRollingFile = org.apache.log4j.RollingFileAppender <br /> log4j.appender.logRollingFile.layout = org.apache.log4j.PatternLayout <br /> log4j.appender.logRollingFile.layout.ConversionPattern = [%-5p][%-22d{yyyy/MM/dd
						HH:mm:ssS}][%l]%n%m%n <br /> log4j.appender.logRollingFile.Threshold = DEBUG <br /> log4j.appender.logRollingFile.ImmediateFlush = TRUE <br /> log4j.appender.logRollingFile.Append = TRUE <br /> log4j.appender.logRollingFile.File = ../Struts2/WebRoot/log/RollingFile/log4j_Struts.log
						<br /> log4j.appender.logRollingFile.MaxFileSize = 1MB <br /> log4j.appender.logRollingFile.MaxBackupIndex = 10 <br /> log4j.appender.logRollingFile.Encoding = UTF-8 </p>
					<p>#用Email发送日志 <br /> log4j.appender.logMail = org.apache.log4j.net.SMTPAppender <br /> log4j.appender.logMail.layout = org.apache.log4j.HTMLLayout <br /> log4j.appender.logMail.layout.LocationInfo = TRUE <br /> log4j.appender.logMail.layout.Title =
						Struts2 Mail LogFile <br /> log4j.appender.logMail.Threshold = DEBUG <br /> log4j.appender.logMail.SMTPDebug = FALSE <br /> log4j.appender.logMail.SMTPHost = SMTP.163.com <br /> log4j.appender.logMail.From = xly3000@163.com <br /> log4j.appender.logMail.To
						= xly3000@gmail.com <br /> #log4j.appender.logMail.Cc = xly3000@gmail.com <br /> #log4j.appender.logMail.Bcc = xly3000@gmail.com <br /> log4j.appender.logMail.SMTPUsername = xly3000 <br /> log4j.appender.logMail.SMTPPassword = 1234567 <br /> log4j.appender.logMail.Subject
						= Log4j Log Messages <br /> #log4j.appender.logMail.BufferSize = 1024 <br /> #log4j.appender.logMail.SMTPAuth = TRUE </p>
					<p>
						#将日志登录到MySQL数据库 <br /> log4j.appender.logDB = org.apache.log4j.jdbc.JDBCAppender <br /> log4j.appender.logDB.layout = org.apache.log4j.PatternLayout <br /> log4j.appender.logDB.Driver = com.mysql.jdbc.Driver <br /> log4j.appender.logDB.URL = jdbc:mysql://127.0.0.1:3306/xly
						<br /> log4j.appender.logDB.User = root <br /> log4j.appender.logDB.Password = 123456 <br /> log4j.appender.logDB.Sql = INSERT INTOT_log4j(project_name,create_date,level,category,file_name,thread_name,line,all_category,message)values('Struts2','%d{yyyy-MM-ddHH:mm:ss}','%p','%c','%F','%t','%L','%l','%m')</p>
				</div>

				<div class="prev-next">

					<br/><br/><br/><br/><br/>
					<div class="prev-button"><a href="#full">Top</a></div>
					<div class="next-button"><a class="ajax-link" href="conclusion.html">Pager</a></div>
				</div>
			</div>

		</div>

		<!--Home Sidebar-->

		<div id="ajax-sidebar"></div>

		<!--Footer-->

		<footer>

			<div class="footer-margin">
				<div class="social-footer">
					<a href="https://www.facebook.com/thomsooncom"><i class="fa fa-facebook"></i></a>
					<a href="https://www.behance.net/TomaszMazurczak"><i class="fa fa-behance"></i></a>
				</div>
				<div class="copyright">© Copyright 2015 Thomsoon.com. willsms.</div>

			</div>

		</footer>

		<!--Scripts-->

		<script src="js/jquery.min.js"></script>
		<script src="js/jquery.easing.min.js"></script>
		<script src="js/modernizr.custom.42534.js" type="text/javascript"></script>
		<script src="js/jquery.waitforimages.js" type="text/javascript"></script>
		<script src="js/typed.js" type="text/javascript"></script>
		<script src="js/masonry.pkgd.min.js" type="text/javascript"></script>
		<script src="js/imagesloaded.pkgd.min.js" type="text/javascript"></script>
		<script src="js/jquery.jkit.1.2.16.min.js"></script>

		<script src="js/script.js" type="text/javascript"></script>

		<script src="js/jClocksGMT.js"></script>
		<script src="js/jquery.rotate.js"></script>
		<script>
			$(document).ready(function() {
				$('#clock_hou').jClocksGMT({
					title: '美国华盛顿',
					offset: '-6'
				});
				$('#clock_india').jClocksGMT({
					title: '印度新德里',
					offset: '+5.5',
					dst: false,
					skin: 2,
					timeformat: 'HH:mm'
				});
				$('#clock_korea').jClocksGMT({
					title: '中国北京',
					offset: '+8',
					skin: 3,
					date: true
				});
				$('#clock_uk').jClocksGMT({
					title: '格林威治',
					date: true,
					dateformat: 'YYYY/MM/DD',
					skin: 4
				});
				$('#clock_tokyo').jClocksGMT({
					title: '日本东京',
					offset: '+9',
					skin: 5
				});
			});
			$('#button, #buttons').on('click', function() {
				$(".opacity-nav").fadeToggle("slow", "linear");
				// Animation complete.
			});
		</script>

	</body>

</html>